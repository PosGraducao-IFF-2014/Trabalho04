<!DOCTYPE html>
<html>
  <head>
    <title>Contas à Pagar</title>
    <meta charset='utf-8'/>
  </head>
  <body>
    <h2>
      Contas à Receber
    </h2>
    <table>
      <thead>
        <tr>
          <th>Código</th>
          <th>Código da Venda</th>
          <th>Data de Vencimento</th>
          <th>Data de Pagamento</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody id="content">
      </tbody>
    <table>

    <script type='text/template' class='thetemplate'>
<div class='todo-content'>
  <% _.each(rc, function(conta) { %>
    <tr>
      <td><%- conta.codigo  %></td>
      <td><%- conta.codigoVenda  %></td>
      <td><%- conta.dataVencimento  %></td>
      <td><%- conta.dataPagamento  %></td>
      <td><%- conta.status  %></td>
    </tr>
  <% }); %>
</div>
    </script>

    <script src='static/jquery.js'></script>
    <script src='static/underscore.js'></script>

    <script type='text/javascript'>
      _.templateSettings.variable = "rc";
      var template = _.template(
        $(".thetemplate").html()
      );

      var renderIndex = function() {
        $.ajax({
          url: "http://localhost:8011/contas_a_receber"
        }).then(function(data) {
          $("#content").html(
            template(data)
          );
        });
      };

      $(document).ready(function() {
        renderIndex()
      });
    </script>
  </body>
</html>
